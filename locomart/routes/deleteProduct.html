<!doctype html>
<html>
	<head>
		<title>Delete Page</title>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
    <script>
    var application = angular.module("deleteModule",[]).
    controller("deleteController",function($scope, $http) {
    	$scope.pass = function(){
    		$http({method:"GET",
      		  url:"/getproduct",
      	params:{"productcode":$scope.product},	  
      	
      	}).success(function(data){
      			  alert("In success");
      			 
      			  if(data.code==200){
      				  alert("inside data");
      				  alert("data is "+JSON.stringify(data.data));
      				  $scope.products = data.data;
      				
      				  
      			  }else{
      				  alert("In else");
      				 alert("data is "+JSON.stringify(data.data));
      			  }
      			  
      		  })
      		  .error(function(error){
      			  alert("In error");
      		  });
    		
    	 }
    	$scope.pass2 = function(product){
    		alert("productcode"+product.productCode);
    		$http({method:"GET",
      		  url:"/deleteproduct",
      	params:{"productcode":product.productCode},	  
      	
      	}).success(function(data){
      			  alert("In success");
      			 
      			  if(data.code==200){
      				  alert("Befor call");
      				 pass();
      				  alert("inside data");
      				
      				
      			
      				  
      			  }else{
      				  alert("In else");
      				
      			  }
      			  
      		  })
      		  .error(function(error){
      			  alert("In error");
      		  });
    		
    		
    	}
    	});
    	
   
    </script>
    </head>
    	<body ng-app="deleteModule">
		<div ng-controller="deleteController">
    Please enter the product code you want to leave<input type="text" value="" name="product" id="product" ng-model="product">
    <input type="submit" ng-click="pass()"/>
<table>
   	<thead>
		<tr >   
   			<th>Product code</th>
   			<th>Product Name</th>
   			<th>Product Line</th>
   			<th>Product Scale</th>
			<th>Product Vendor</th>
			<th>Product Description</th>
			<th>Quantity in Stock</th>
			<th>Buy Price</th>
			<th>MSRP</th>
			
		</tr>
	</thead>
	<tbody>
	<tr ng-repeat="product in products">
		<td>{{product.productCode}}</td>>
		<td>{{product.productName}}</td>>
		<td>{{product.productLine}}</td>>
		<td>{{product.productScale}}</td>>
		<td>{{product.productVendor}}</td>>
		<td>{{product.productDescription}}</td>>
		<td>{{product.quantityInStock}}</td>>
		<td>{{product.buyPrice}}</td>
		<td>{{product.MSRP}}</td>
		<td><button ng-click="pass2(product)">Details</button></td>
	</tbody>
    </table>
    </div>
    </body>
    </html>